// define variables that reference elements on our page
const choiceForm = document.forms[0];
const choiceInput = choiceForm.elements["choice"];
const resultsList = document.getElementById("results");


//dummy hardcoded data
let dbresults_dummy ={
  temp_year:2030,
  temp_value:30.26
};

// event-handler functions
function displayValueResult(temp_value,classifier){
  console.log("Displaying a result including just a temperature value");
  console.log(temp_value,classifier);
  // append to the html document
  let newListItem=document.createElement("li");
  newListItem.innerText="The "+classifier+" temperature was "+temp_value.toString();
  resultsList.appendChild(newListItem);
}

function displayYearValueResult(temp_year,temp_value,classifier){
  console.log("Displaying a result including the year and a temperature value");
  console.log(temp_year, temp_value,classifier);
  // append to the html document
  let newListItem=document.createElement("li");
  newListItem.innerText="The "+classifier+" temperature was "+temp_value.toString();
  newListItem.innerText+=" and this happened in "+temp_year.toString();
  resultsList.appendChild(newListItem);
}

function displayMaxTemperature(){
  console.log("Display Maximum Temperature function");
  displayYearValueResult(dbresults_dummy.temp_year,dbresults_dummy.temp_value,"maximum");
}


function displayMinTemperature(){
  console.log("Display Minimum Temperature function");
  displayYearValueResult(dbresults_dummy.temp_year,dbresults_dummy.temp_value,"minimum");
}


function displayAvgTemperature(){
  console.log("Display average Temperature function");
  displayValueResult(dbresults_dummy.temp_value,"average");
}

function displayAllTemperature(){
  console.log("Display all the Temperatures function");
  displayYearValueResult(dbresults_dummy.temp_year,dbresults_dummy.temp_value,"");
}

// handler fnunctions
function getMaxTemperature(){
  console.log("Maximum Temperature handler function");
  displayMaxTemperature();
};

function getMinTemperature(){
  console.log("Minimum Temperature handler function")
  displayMinTemperature();
};

function getAvgTemperature(){
  console.log("Average Temperature handler function")
  displayAvgTemperature();
};

function getAllTemperature(){
  console.log("All Temperature handler function")
  displayAllTemperature();
};


//listener function
// listen for the form to be submitted
choiceForm.onsubmit = event => {
  // stop our form submission from refreshing the page
  event.preventDefault(); 
  // reset the results section ready for current results
  resultsList.innerHTML = "";

  
  // Call the appropriate handler function
  if (choiceInput.value=="maxTemp"){
    getMaxTemperature();
  } else if (choiceInput.value=="minTemp"){
    getMinTemperature();
  } else if (choiceInput.value=="avgTemp"){
    getAvgTemperature();
  } else {
    getAllTemperature()
  };
  
  //reset form ready for a future choice
  choiceInput.value="";
};
